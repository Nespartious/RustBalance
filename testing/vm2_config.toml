# RustBalance Configuration
# Generated by deploy.sh --join

# Root-level settings
local_port = 8080
hidden_service_dir = "/var/lib/tor/rustbalance_hs"

[node]
id = "node-a0c6929d"
priority = 10
clock_skew_tolerance_secs = 5
hidden_service_dir = "/var/lib/tor/rustbalance_hs"

[master]
onion_address = "t2qx2nggk7nit627rwrqvjclyzuyohfbjzvfzf4xrn5ik65xo3nh4eyd.onion"
identity_key_path = "/etc/rustbalance/master.key"

[target]
onion_address = "sigilahzwq5u34gdh2bl3ymokyc7kobika55kyhztsucdoub73hz7qid.onion"
port = 80

[tor]
control_host = "127.0.0.1"
control_port = 9051
socks_port = 9050

[publish]
refresh_interval_secs = 600
takeover_grace_secs = 90
max_intro_points = 20

[health]
descriptor_max_age_secs = 900
http_probe_enabled = false
http_probe_path = "/health"
http_probe_timeout_secs = 5

[coordination]
mode = "wireguard"
heartbeat_interval_secs = 10
heartbeat_timeout_secs = 30
lease_duration_secs = 60
backoff_jitter_secs = 15
cluster_token = "fc126c90e5183fb1380f560ab831fa6aad99a7278852329d03ef6b2f91ff2952"
join_secret = "XvaM8elkDjdt9Z3HR87eXjbqnup-eosGZ1Vs7ZkNkPQ"

[wireguard]
interface = "wg-rb"
listen_port = 51820
tunnel_ip = "10.200.200.11"
private_key = "mOrl7eJuklitba+DkahZdPUsefkjaSnpkizbug9p30A="
public_key = "xyiD32V3L8cBdVv17ufrB5LVXnOCR+X1M6TwOFm26F4="
external_endpoint = "192.168.40.145:51820"

[[wireguard.peers]]
id = "node-first"
endpoint = "192.168.40.144:51820"
tunnel_ip = "10.200.200.1"
public_key = "1GhStfXamYaKLuHcwRJPRM6Q5ynNENm3FwInTNetWkg="
